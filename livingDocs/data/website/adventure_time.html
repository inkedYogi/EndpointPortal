<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Character Uploader</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen flex items-center justify-center">
    <div class="bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-md">
        <h1 class="text-2xl font-bold text-center text-emerald-400 mb-6">Upload Character Sheet</h1>
        <p class="text-gray-400 text-center mb-4">Please upload your JSON file to view your character details.</p>
        <div class="space-y-4">
            <label for="jsonFile" class="block text-gray-400">Select your character JSON file:</label>
            <input type="file" id="jsonFile" accept=".json" class="block w-full text-gray-100
                file:mr-4 file:py-2 file:px-4
                file:rounded-full file:border-0
                file:text-sm file:font-semibold
                file:bg-emerald-50 file:text-emerald-700
                hover:file:bg-emerald-100" />
            <button id="uploadButton" class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-2 px-4 rounded transition">
                Load Character
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const fileInput = document.getElementById('jsonFile');
            const uploadButton = document.getElementById('uploadButton');

            uploadButton.addEventListener('click', function() {
                if (fileInput.files.length === 0) {
                    alert('Please select a JSON file to upload.');
                    return;
                }

                const file = fileInput.files[0];
                const reader = new FileReader();

                reader.onload = function(event) {
                    try {
                        const characterData = JSON.parse(event.target.result);
                        sessionStorage.setItem('characterData', JSON.stringify(characterData));
                        window.location.href = 'character.html';
                    } catch (error) {
                        alert('Invalid JSON file. Please check the file format.');
                        console.error('Parsing error:', error);
                    }
                };
                reader.readAsText(file);
            });
        });
    </script>
</body>
</html>
